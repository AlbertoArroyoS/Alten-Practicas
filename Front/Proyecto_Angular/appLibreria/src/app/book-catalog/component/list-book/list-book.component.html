<br>
<div class="container ">
    <div class="row">
      <span>
        <a href="javascript:void(0)" (click)="recargarTablaLibros()">{{ title }}</a>
      </span>  
    </div>
      <!-- Inicio formulario de registro-->
  <div class="formularioRegistro">
    <form class="form-group" (ngSubmit)="guardarLibro()" [formGroup]="formularioLibro" *ngIf="botonNuevoLibroVisible">
      <div class="form-group">
        <h1 >Añadir un nuevo libro</h1>
        <label for="selectAutor">Selecciona un autor</label>
        <div>
          <input type="text" class="form-control" formControlName="nombreAutor" placeholder="Nombre autor" aria-label="NombreAutor">
          <p *ngIf="formularioLibro.get('nombreAutor')?.errors?.['required']" class="text-danger">El campo nombre del autor es requerido</p>
          </div>
          <div>
            <input type="text" class="form-control" formControlName="apellidosAutor" placeholder="Apellidos Autor" aria-label="ApellidosAutor">
            <p *ngIf="formularioLibro.get('apellidosAutor')?.errors?.['required']" class="text-danger">El campo apellido del autor es requerido</p>
            </div>
    </div>
        <div class="row mt-3">
            <div>
            <input type="text" class="form-control" formControlName="titulo" placeholder="Título" aria-label="Titulo">
            <p *ngIf="formularioLibro.get('titulo')?.errors?.['required']" class="text-danger">El campo nombre es requerido</p>
            </div>
            <div>
              <select class="form-select form-select-sm" formControlName="genero" aria-label="Small select example">
                <option disabled selected value="">Selecciona un género</option>
                <option value="Fantasía">Fantasía</option>
                <option value="Infantil">Infantil</option>
                <option value="Poesía">Poesía</option>
                <option value="Ciencia ficción">Ciencia ficción</option>
                <option value="Misterio">Misterio</option>
                <option value="Romance">Romance</option>
                <option value="Otros">Otros</option>
            </select>
                <p *ngIf="formularioLibro.get('genero')?.errors?.['required']" class="text-danger">El campo genero es requerido</p>
                <input type="number" class="form-control" formControlName="paginas" placeholder="Páginas" aria-label="Paginas">
                <p *ngIf="formularioLibro.get('paginas')?.errors?.['required']" class="text-danger">El campo páginas es requerido</p>
            </div>
            <div >
                <input type="text" class="form-control" formControlName="editorial" placeholder="Editorial" aria-label="Editorial">
                <p *ngIf="formularioLibro.get('editorial')?.errors?.['required']" class="text-danger">El campo editorial es requerido</p>
            </div>
            <div>
                <textarea class="form-control" formControlName="descripcion" placeholder="Descripción" aria-label="Descripcion"></textarea>
            </div>
            <div>
              <label for="precio">Precio</label>
              <input type="number" class="form-control" formControlName="precio" placeholder="Precio" aria-label="Precio" min="0">
              <p *ngIf="formularioLibro.get('precio')?.errors?.['required']" class="text-danger">El campo precio es requerido</p>
              <p *ngIf="formularioLibro.get('precio')?.errors?.['min']" class="text-danger">El precio debe ser mayor o igual a 0</p>
          </div>
          
        </div>

        <div class="mt-3">
        <button type="submit" class="btn btn-primary">Añadir libro</button>
        </div>
    </form>
</div>
  <!-- Fin formulario de registro -->
    <br>
    <div>
      <div class="input-group mb-3">
        <input #keywordInput type="text" class="form-control" placeholder="Buscar..." aria-label="Buscar" aria-describedby="basic-addon2">
        <div class="input-group-append">
          <button (click)="buscarLibros(keywordInput.value)" class="btn btn-outline-secondary" type="button">Buscar</button>
        </div>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="EncabezadoTabla">
      <h1>Tabla de libros</h1>
      <button (click)="botonNuevoLibro()" type="button" class="btn btn-dark">
        Nuevo libro
      </button>
    </div>
    <div class="tablaLibros">
      <table class="table table-primary table-hover shadow">
          <thead>
            <tr class="table-success">
              <th scope="col">id</th>
              <th scope="col">Título</th>
              <th scope="col">Nombre autor</th>
              <th scope="col">Apellidos autor</th>
              <th scope="col">Género</th>
              <th scope="col">Páginas</th>
              <th scope="col">Editorial</th>
              <th scope="col">Descripción</th>
              <th scope="col">Opción</th>
          
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of books">
              <th scope="row">{{ item.id }}</th>
              <td>{{item.titulo}}</td>
              <td>{{item.nombreAutor}}</td>
              <td>{{item.apellidosAutor}}</td>
              <td>{{item.genero}}</td>
              <td>{{item.paginas}}</td>
              <td>{{item.editorial}}</td>
              <td>{{item.descripcion}}</td>
              <td class="acciones">
                <button
                  (click)="obtenerLibroPorId(item.id)"
                  type="button"
                  class="btn btn-success"
                >
                  Ver libro
                </button>
                <button
                  (click)="editarLibro(item)"
                  type="button"
                  class="btn btn-warning"
                >
                  Editar autor
                </button>
                <button
                  (click)="eliminarLibro(item)"
                  type="button"
                  class="btn btn-danger"
                >
                  Eliminar autor
                </button>
              </td>
            </tr>
          </tbody>
      </table>

  </div>
  
  <div *ngIf="paginacion">
    <ul *ngIf="totalPaginas && totalPaginas.length > 0" class="pagination">
      <!-- Botón "Anterior" -->
      <li [class.disabled]="currentPage <= 0">
        <button
          (click)="changePage(currentPage - 1)"
          [disabled]="currentPage <= 0"
          class="page-link"
        >
          Anterior
        </button>
      </li>
  
      <!-- Números de página -->
      <li
        *ngFor="let page of totalPaginas"
        [class.active]="currentPage === page - 1"
        class="page-item"
      >
        <a (click)="changePage(page - 1)" class="page-link">{{ page }}</a>
      </li>
  
      <!-- Botón "Siguiente" -->
      <li [class.disabled]="currentPage >= totalPaginas.length - 1">
        <button
          (click)="changePage(currentPage + 1)"
          [disabled]="currentPage >= totalPaginas.length - 1"
          class="page-link"
        >
          Siguiente
        </button>
      </li>
    </ul>
  
    <!-- Template HTML -->
    <select (change)="changePageSize($event)">
      <option *ngFor="let size of [10, 20, 50, 100]" [value]="size">
        {{ size }}
      </option>
    </select>
  </div>
  